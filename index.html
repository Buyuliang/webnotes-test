<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Pages ËÆ∞‰∫ãÊú¨</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìù</text></svg>">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- KaTeX for math rendering (inline $...$ and display $$...$$) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üìù ÊàëÁöÑËÆ∞‰∫ãÊú¨</h1>
            <div class="header-actions">
                <button id="themeToggleBtn" class="btn btn-secondary" title="ÂàáÊç¢‰∏ªÈ¢ò">‚òÄÔ∏è Êòé‰∫Æ</button>
                <button id="syncBtn" class="btn btn-secondary" title="‰ªé GitHub ÂêåÊ≠•Á¨îËÆ∞">üîÑ ÂêåÊ≠•</button>
                <button id="configBtn" class="btn btn-secondary">‚öôÔ∏è ÈÖçÁΩÆ</button>
                <button id="logoutBtn" class="btn btn-secondary" title="ÈÄÄÂá∫ÁôªÂΩï">üö™ ÈÄÄÂá∫</button>
                <button id="newNoteBtn" class="btn btn-primary">+ Êñ∞Âª∫Á¨îËÆ∞</button>
            </div>
        </header>

        <!-- ÈÖçÁΩÆÈù¢Êùø -->
        <div id="configPanel" class="config-panel hidden">
            <h3>GitHub ÈÖçÁΩÆ</h3>
            <div class="form-group">
                <label for="githubToken">GitHub Personal Access Token:</label>
                <input type="password" id="githubToken" placeholder="ghp_xxxxxxxxxxxx">
                <small>ÈúÄË¶Å repo ÊùÉÈôêÔºåÁî®‰∫éÁÆ°ÁêÜ‰ªìÂ∫ìÊñá‰ª∂</small>
            </div>
            <div class="form-group">
                <label for="githubRepo">‰ªìÂ∫ìÂêçÁß∞ (owner/repo):</label>
                <input type="text" id="githubRepo" placeholder="username/repo-name">
            </div>
            <div class="form-group">
                <button id="saveConfigBtn" class="btn btn-primary">‰øùÂ≠òÈÖçÁΩÆ</button>
            </div>
        </div>

        <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
        <div class="main-content">
            <!-- ‰æßËæπÊ†è - ÁõÆÂΩïÊ†ë -->
            <aside class="sidebar">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="üîç ÊêúÁ¥¢Á¨îËÆ∞...">
                    <button id="refreshTreeBtn" class="btn-refresh" title="Âà∑Êñ∞ÁõÆÂΩïÊ†ë">üîÑ</button>
                </div>
                <div id="directoryTree" class="directory-tree">
                    <!-- ÁõÆÂΩïÊ†ëÂ∞ÜÂä®ÊÄÅÁîüÊàê -->
                </div>
            </aside>

            <!-- ÁºñËæëÂå∫ -->
            <main class="editor-area">
                <div id="emptyState" class="empty-state">
                    <p>ÈÄâÊã©‰∏Ä‰∏™Á¨îËÆ∞ÂºÄÂßãÁºñËæëÔºåÊàñÂàõÂª∫Êñ∞Á¨îËÆ∞</p>
                </div>

                <div id="editorContainer" class="editor-container hidden">
                    <div class="editor-header">
                        <div class="note-path" id="notePath"></div>
                        <input type="text" id="noteTitle" placeholder="Á¨îËÆ∞Ê†áÈ¢ò" class="note-title-input">
                        <div class="editor-actions">
                            <button id="fullscreenBtn" class="btn btn-icon" title="ÂÖ®Â±èÊ®°Âºè">
                                ‚õ∂ ÂÖ®Â±è
                            </button>
                            <button id="viewModeBtn" class="btn btn-icon" title="ÂàáÊç¢ÁºñËæë/È¢ÑËßàÊ®°Âºè">
                                üëÅÔ∏è È¢ÑËßà
                            </button>
                            <button id="uploadFileBtn" class="btn btn-icon" title="‰∏ä‰º†Êñá‰ª∂">
                                üìé ‰∏ä‰º†Êñá‰ª∂
                            </button>
                            <input type="file" id="fileInput" multiple style="display: none;">
                            <button id="deleteNoteBtn" class="btn btn-icon btn-danger" title="Âà†Èô§Á¨îËÆ∞">
                                üóëÔ∏è Âà†Èô§
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <!-- Markdown Â∑•ÂÖ∑Ê†è -->
                        <div class="markdown-toolbar">
                            <div class="toolbar-group">
                                <button class="toolbar-btn" data-action="heading" data-level="1" title="Ê†áÈ¢ò 1">H1</button>
                                <button class="toolbar-btn" data-action="heading" data-level="2" title="Ê†áÈ¢ò 2">H2</button>
                                <button class="toolbar-btn" data-action="heading" data-level="3" title="Ê†áÈ¢ò 3">H3</button>
                            </div>
                            <div class="toolbar-separator"></div>
                            <div class="toolbar-group">
                                <button class="toolbar-btn" data-action="bold" title="Á≤ó‰Ωì"><strong>B</strong></button>
                                <button class="toolbar-btn" data-action="italic" title="Êñú‰Ωì"><em>I</em></button>
                                <button class="toolbar-btn" data-action="strikethrough" title="Âà†Èô§Á∫ø"><s>S</s></button>
                            </div>
                            <div class="toolbar-separator"></div>
                            <div class="toolbar-group">
                                <button class="toolbar-btn" data-action="code" title="Ë°åÂÜÖ‰ª£Á†Å">&lt;/&gt;</button>
                                <button class="toolbar-btn" data-action="codeblock" title="‰ª£Á†ÅÂùó">```</button>
                                <button class="toolbar-btn" data-action="bash" title="Bash ‰ª£Á†ÅÂùó">Bash</button>
                            </div>
                            <div class="toolbar-separator"></div>
                            <div class="toolbar-group">
                                <button class="toolbar-btn" data-action="link" title="ÈìæÊé•">üîó</button>
                                <button class="toolbar-btn" data-action="image" title="ÂõæÁâá">üñºÔ∏è</button>
                                <button class="toolbar-btn" data-action="table" title="Ë°®Ê†º">üìä</button>
                            </div>
                            <div class="toolbar-separator"></div>
                            <div class="toolbar-group">
                                <button class="toolbar-btn" data-action="list" data-type="ul" title="Êó†Â∫èÂàóË°®">‚Ä¢ ÂàóË°®</button>
                                <button class="toolbar-btn" data-action="list" data-type="ol" title="ÊúâÂ∫èÂàóË°®">1. ÂàóË°®</button>
                                <button class="toolbar-btn" data-action="quote" title="ÂºïÁî®">‚ùù</button>
                            </div>
                            <div class="toolbar-separator"></div>
                            <div class="toolbar-group">
                                <button class="toolbar-btn" data-action="hr" title="ÂàÜÈöîÁ∫ø">‚îÄ</button>
                                <div class="toolbar-dropdown">
                                    <button class="toolbar-btn" data-action="linebreak" title="Êç¢Ë°åÁ¨¶ËΩ¨Êç¢">‚Ü©Ô∏è Êç¢Ë°åÁ¨¶</button>
                                    <div class="linebreak-picker" style="display: none;">
                                        <div class="linebreak-info" style="margin-bottom: 10px; padding: 8px; background: #f0f7ff; border-radius: 4px; font-size: 12px;">
                                            <div id="linebreakStatus">Ê£ÄÊµã‰∏≠...</div>
                                        </div>
                                        <button class="linebreak-option" data-type="lf" style="width: 100%; margin-bottom: 5px;">ËΩ¨Êç¢‰∏∫ LF (Unix/Linux/Mac)</button>
                                        <button class="linebreak-option" data-type="crlf" style="width: 100%; margin-bottom: 5px;">ËΩ¨Êç¢‰∏∫ CRLF (Windows)</button>
                                        <button class="linebreak-option" data-type="cr" style="width: 100%;">ËΩ¨Êç¢‰∏∫ CR (ÊóßÁâà Mac)</button>
                                    </div>
                                </div>
                                <div class="toolbar-dropdown">
                                    <button class="toolbar-btn" data-action="color" title="ÊñáÂ≠óÈ¢úËâ≤">üé® È¢úËâ≤</button>
                                    <div class="color-picker" style="display: none;">
                                        <div class="color-options">
                                            <span class="color-option" data-color="#000000" style="background: #000000;" title="ÈªëËâ≤"></span>
                                            <span class="color-option" data-color="#ff0000" style="background: #ff0000;" title="Á∫¢Ëâ≤"></span>
                                            <span class="color-option" data-color="#00ff00" style="background: #00ff00;" title="ÁªøËâ≤"></span>
                                            <span class="color-option" data-color="#0000ff" style="background: #0000ff;" title="ËìùËâ≤"></span>
                                            <span class="color-option" data-color="#ffff00" style="background: #ffff00;" title="ÈªÑËâ≤"></span>
                                            <span class="color-option" data-color="#ff00ff" style="background: #ff00ff;" title="Á¥´Ëâ≤"></span>
                                            <span class="color-option" data-color="#00ffff" style="background: #00ffff;" title="ÈùíËâ≤"></span>
                                            <span class="color-option" data-color="#ffa500" style="background: #ffa500;" title="Ê©ôËâ≤"></span>
                                            <span class="color-option" data-color="#808080" style="background: #808080;" title="ÁÅ∞Ëâ≤"></span>
                                            <span class="color-option" data-color="#800000" style="background: #800000;" title="Ê∑±Á∫¢"></span>
                                            <span class="color-option" data-color="#008000" style="background: #008000;" title="Ê∑±Áªø"></span>
                                            <span class="color-option" data-color="#000080" style="background: #000080;" title="Ê∑±Ëìù"></span>
                                        </div>
                                        <input type="text" class="color-input" placeholder="ÊàñËæìÂÖ•È¢úËâ≤ÂÄº (#ff0000)" style="margin-top: 5px; padding: 5px; width: 100%; border: 1px solid #ddd; border-radius: 3px;">
                                    </div>
                                </div>
                                <div class="toolbar-dropdown">
                                    <button class="toolbar-btn" data-action="fontsize" title="Â≠ó‰ΩìÂ§ßÂ∞è">Aa Â§ßÂ∞è</button>
                                    <div class="fontsize-picker" style="display: none;">
                                        <button class="size-option" data-size="12px">12px</button>
                                        <button class="size-option" data-size="14px">14px</button>
                                        <button class="size-option" data-size="16px">16px</button>
                                        <button class="size-option" data-size="18px">18px</button>
                                        <button class="size-option" data-size="20px">20px</button>
                                        <button class="size-option" data-size="24px">24px</button>
                                        <button class="size-option" data-size="32px">32px</button>
                                        <input type="text" class="size-input" placeholder="ÊàñËæìÂÖ•Ëá™ÂÆö‰πâÂ§ßÂ∞è" style="margin-top: 5px; padding: 5px; width: 100%; border: 1px solid #ddd; border-radius: 3px;">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <textarea 
                            id="noteContent" 
                            class="note-content markdown-editor"
                            placeholder="ÂºÄÂßãËæìÂÖ• Markdown Ê†ºÂºèÊñáÊú¨...ÊîØÊåÅÁ≤òË¥¥ÂõæÁâá (Ctrl+V)"
                        ></textarea>
                        <div id="markdownPreview" class="markdown-preview hidden"></div>
                    </div>
                    <div class="editor-footer">
                        <div class="attachments-list" id="attachmentsList">
                            <!-- ÈôÑ‰ª∂ÂàóË°® -->
                        </div>
                        <div class="editor-info">
                            <span id="lastSaved">Êú™‰øùÂ≠ò</span>
                            <button id="saveNoteBtn" class="btn btn-primary">üíæ ‰øùÂ≠ò</button>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Âä†ËΩΩÊèêÁ§∫ -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="spinner"></div>
        <p>Â§ÑÁêÜ‰∏≠...</p>
    </div>

    <!-- Ê∂àÊÅØÊèêÁ§∫ -->
    <div id="messageToast" class="toast hidden"></div>

    <!-- Êñ∞Âª∫Êñá‰ª∂Â§πÂØπËØùÊ°Ü -->
    <div id="newFolderDialog" class="dialog hidden">
        <div class="dialog-content">
            <h3>Êñ∞Âª∫Êñá‰ª∂Â§π</h3>
            <div class="form-group">
                <label for="folderName">Êñá‰ª∂Â§πÂêçÁß∞:</label>
                <input type="text" id="folderName" placeholder="ËæìÂÖ•Êñá‰ª∂Â§πÂêçÁß∞">
            </div>
            <div class="form-group">
                <label for="folderPath">Áà∂ÁõÆÂΩï:</label>
                <input type="text" id="folderPath" readonly placeholder="root">
            </div>
            <div class="dialog-actions">
                <button id="cancelFolderBtn" class="btn btn-secondary">ÂèñÊ∂à</button>
                <button id="createFolderBtn" class="btn btn-primary">ÂàõÂª∫</button>
            </div>
        </div>
    </div>

    <!-- Êñ∞Âª∫Á¨îËÆ∞ÂØπËØùÊ°Ü -->
    <div id="newNoteDialog" class="dialog hidden">
        <div class="dialog-content">
            <h3>Êñ∞Âª∫Á¨îËÆ∞</h3>
            <div class="form-group">
                <label for="newNoteName">Á¨îËÆ∞ÂêçÁß∞:</label>
                <input type="text" id="newNoteName" placeholder="ËæìÂÖ•Á¨îËÆ∞ÂêçÁß∞Ôºà‰∏çÂê´Êâ©Â±ïÂêçÔºâ">
            </div>
            <div class="form-group">
                <label for="newNotePath">‰øùÂ≠òË∑ØÂæÑ:</label>
                <input type="text" id="newNotePath" placeholder="root (ÁïôÁ©∫Ë°®Á§∫Ê†πÁõÆÂΩï)">
            </div>
            <div class="dialog-actions">
                <button id="cancelNoteBtn" class="btn btn-secondary">ÂèñÊ∂à</button>
                <button id="createNoteBtn" class="btn btn-primary">ÂàõÂª∫</button>
            </div>
        </div>
    </div>

    <script src="github-api.js"></script>
    <!-- KaTeX JS (loaded before app.js so math rendering is available) -->
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
    <!-- KaTeX auto-render to convert TeX in the DOM to HTML -->
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
